var CurrentCulture=gp.Util.GetCookie("CurrentCulture");gp.SNS={FaceBookAppID:"259473810767533",GoogleAppID:"768949962955-nrtmsvfi3ropso29nggosh67u3v161uj.apps.googleusercontent.com",Host:"",Error:"",SNSType:"",Type:"",InitFacebook:function(type,host,error){Host=host;Error=error;SNSType="facebook";var cw=500;var ch=300;var sw=screen.availWidth;var sh=screen.availHeight;var px=(sw-cw)/2;var ph=(sh-ch)/2;if(window.location.hash.length<10){var appID=this.FaceBookAppID;var path=location.protocol+"//www.facebook.com/dialog/oauth?";var redirect_uri=gp.Http.Platform+"/SNS/Facebook/"+type+"?host="+host;var queryParams=["client_id="+appID,"redirect_uri="+redirect_uri,"display=popup","response_type=token","scope=email,read_stream"];var query=queryParams.join("&");var url=path+query;window.open(url,"Connectfacebook","left="+px+", top="+ph+", width="+cw+", height="+ch)}else{gp.Util.SetCookie("SNS",window.location.hash.substring(1),365);this.setFacebook(type)}},InitGoogle:function(type,host,error){Host=host;Error=error;SNSType="google";var cw=800;var ch=650;var sw=screen.availWidth;var sh=screen.availHeight;var px=(sw-cw)/2;var ph=(sh-ch)/2;if(window.location.hash.length<10){var appID=this.GoogleAppID;var path=location.protocol+"//accounts.google.com/o/oauth2/auth?";var redirect_uri=gp.Http.Platform+"/SNS/Google/"+type;var queryParams=["client_id="+appID,"redirect_uri="+redirect_uri,"response_type=token","scope=profile email","state="+host];var query=queryParams.join("&");var url=path+query;window.open(url,"Connectgoogle","left="+px+", top="+ph+", width="+cw+", height="+ch)}else{gp.Util.SetCookie("SNS",window.location.hash.substring(1),365);this.setGoogle(type)}},PrintSocialBtnType1:function(){document.write('<style type="text/css">');document.write(".snsType01 {clear: both; overflow:hidden;}");document.write(".snsType01 li {float: left;}");document.write(".snsType01 li.snsOther01 {padding: 1px 0 0;}");document.write(".snsType01 li.snsOther02 {padding-right:5px;}");document.write(".snsType01 li.snsOther03 {padding:1px 5px 0 0;}");document.write("</style>");document.write("<div>");document.write('<ul class="snsType01">');document.write('<li class="snsOther01">');document.write('<iframe name="f11f0a8e93dfb51" title="Like this content on Facebook." class="fb_ltr" id="f1a9291b4e070b6" src='+location.protocol+"//www.facebook.com/plugins/like.php?href="+document.location+"&layout=box_count&locale="+CurrentCulture.replace("-","_")+'&node_type=1&sdk=joey&send=false&show_faces=false&width=55" frameBorder="0" scrolling="no" style="border-bottom: medium none; border-left: medium none; width: 55px; height: 63px; border-top: medium none; border-right: medium none;" allowTransparency="allowtransparency"></iframe>');document.write("</li>");document.write('<li class="snsOther02">');document.write("<div>");document.write("<a href="+location.protocol+'//twitter.com/share" class="twitter-share-button"');document.write('data-url=""');document.write('data-via="your_screen_name"');document.write('data-text="Checking out this page about Tweet Buttons"');document.write('data-related="anywhere:The Javascript API"');document.write('data-count="vertical"></a>');document.write("</div>");document.write("</li>");document.write('<li class="snsOther03"><div class="addthis_toolbox addthis_default_style"><a class="addthis_counter"></a></div></li>');document.write("</ul>");document.write("</div>")},PrintSocialBtnType2:function(){document.write('<style type="text/css">');document.write(".snsType02 {clear: both; overflow:hidden;}");document.write(".snsType02 li {float: left;}");document.write(".snsType02 li.snsOther01 {padding:0;}");document.write(".snsType02 li.snsOther02 {padding:0;}");document.write(".snsType02 li.snsOther03 {padding:0; margin-left: -8px;}");document.write("</style>");document.write('<ul class="snsType02">');document.write('<li class="snsOther01">');document.write('<iframe name="f11f0a8e93dfb51" title="Like this content on Facebook." class="fb_ltr" id="f1a9291b4e070b6" src='+location.protocol+"//www.facebook.com/plugins/like.php?href="+document.location+"&layout=button_count&locale="+CurrentCulture.replace("-","_")+'&node_type=1&sdk=joey&send=false&show_faces=false&width=80" frameBorder="0" scrolling="no" style="border-bottom: medium none; border-left: medium none; width: 80px; height: 63px; border-top: medium none; border-right: medium none;" allowTransparency="allowtransparency"></iframe>');document.write("</li>");document.write('<li class="snsOther02">');var lang=GetCookie("CurrentCulture");lang=lang==""?"en":lang;document.write("<a href="+location.protocol+'//twitter.com/share" class="twitter-share-button" lang="'+lang+'"></a></li>');document.write('<li class="snsOther03">');document.write('<div class="addthis_toolbox addthis_default_style">');document.write('<a class="addthis_counter addthis_pill_style"></a>');document.write("</div>");document.write("</li>");document.write("</ul>")},setFacebook:function(type){var accessToken=gp.Util.GetCookie("SNS");var path="https://graph.facebook.com/me?";var queryParams;switch(type.toLowerCase()){case"edit":queryParams=[accessToken,"callback=gp.SNS.goConnectFacebookEdit"];break;case"connect":queryParams=[accessToken,"callback=gp.SNS.goConnectFacebookCreate"];break;case"connectframe":queryParams=[accessToken,"callback=gp.SNS.goConnectFacebookCreateFrame"];break;case"connectpop":queryParams=[accessToken,"callback=gp.SNS.goConnectFacebookCreatePop"];break;case"connectpopevnet":queryParams=[accessToken,"callback=gp.SNS.goConnectFacebookCreatePopEvent"];break;default:queryParams=[accessToken,"callback=gp.SNS.goConnectFacebookCreate"];break}var query=queryParams.join("&");var url=path+decodeURIComponent(query);var script=document.createElement("script");script.src=url;document.body.appendChild(script)},goNextStepGoogle:function(user){if(user.error){this.Error=user.error}else{if(user.verified_email){Host=Host.split("/").join("@");switch(gp.SNS.Type.toLowerCase()){case"edit":gp.SNS.getTopWin().document.location.href=gp.Http.Member+"/MyAccount/Profile/ConnectSNS/"+user.id+"|"+Base64.encode(user.name)+"|google";break;case"connect":gp.SNS.getTopWin().document.location.href=gp.Http.Login+"/Home/SNSLogin/"+user.id+"|"+Host+"|"+Error+"|false|google";break;case"connectframe":gp.SNS.getTopWin().document.location.href=gp.Http.Login+"/Home/SNSLogin/?id="+user.id+"|"+Host+"|"+Error+"|false|google&actionType=CreateFrame";break;case"connectpop":gp.SNS.getTopWin().parent.document.location.href=gp.Http.Login+"/Home/SNSLogin/"+user.id+"|"+Host+"|"+Error+"|false|google";break;case"connectpopevent":gp.SNS.getTopWin().document.location.href=gp.Http.Login+"/Home/SNSLogin/"+user.id+"|"+Host+"|"+Error+"|true|google";break}}}gp.SNS.selfClose()},getFacebook:function(){this.SNSType="facebook";var accessToken=gp.Util.GetCookie("SNS");var path="https://graph.facebook.com/me?";var queryParams=[accessToken,"callback=gp.SNS.displayUser"];var query=queryParams.join("&");var url=path+decodeURIComponent(query);var script=document.createElement("script");script.src=url;$("body").append(script)},setGoogle:function(type){var accessToken=gp.Util.GetCookie("SNS");var queryParams;var path="//www.googleapis.com/userinfo/v2/me?";queryParams=[accessToken,"callback=gp.SNS.goNextStepGoogle"];var query=queryParams.join("&");var url=path+decodeURIComponent(query);gp.SNS.Type=type;var script=document.createElement("script");script.src=url;$("body").append(script)},getGoogle:function(){this.SNSType="google";var accessToken=gp.Util.GetCookie("SNS");var queryParams;var path="//www.googleapis.com/userinfo/v2/me?";queryParams=[accessToken,"callback=gp.SNS.displayUser"];var query=queryParams.join("&");var url=path+decodeURIComponent(query);var script=document.createElement("script");script.src=url;$("body").append(script)},displayUser:function(user){if(user.id==undefined){}else{$(".sns3party_wrp").show();$(".sns_join").show();$(".sns_join_txt").show();$(".sns_wrp, .wrp_sns_btn").hide();$(".join_title").hide();$("#Email").parent().hide();$(".sns_username").text(user.name);$(".sns_email").text(user.email);switch(this.SNSType){case"facebook":$(".sns_img").attr("src","//graph.facebook.com/"+user.id+"/picture?redirect=1&height=50&width=50&type=normal");break;case"google":$(".sns_img").attr("src",user.picture);break}$("#SnsID").val(user.id);$("#Email").val(user.email);$("#SnsUserName").val(user.name)}},displayUserGoogle:function(user){if(user.error){this.Error=user.error}else{if(user.verified_email){gp.SNS.displayUser(user)}else{this.Error="Email is not varified"}}},goConnectFacebookEdit:function(user){gp.SNS.getTopWin().document.location.href=gp.Http.Member+"/MyAccount/Profile/ConnectSNS/"+user.id+"|"+Base64.encode(user.name)+"|facebook";gp.SNS.selfClose()},goConnectFacebookCreate:function(user){Host=Host.split("/").join("@");gp.SNS.getTopWin().document.location.href=gp.Http.Login+"/Home/SNSLogin/"+user.id+"|"+Host+"|"+Error+"|false|facebook";gp.SNS.selfClose()},goConnectFacebookCreateFrame:function(user){Host=Host.split("/").join("@");gp.SNS.getTopWin().document.location.href=gp.Http.Login+"/Home/SNSLogin/?id="+user.id+"|"+Host+"|"+Error+"|false|facebook&actionType=CreateFrame";gp.SNS.selfClose()},goConnectFacebookCreatePop:function(user){Host=Host.split("/").join("@");gp.SNS.getTopWin().parent.document.location.href=gp.Http.Login+"/Home/SNSLogin/"+user.id+"|"+Host+"|"+Error+"|false|facebook";gp.SNS.selfClose()},goConnectFacebookCreatePopEvent:function(user){Host=Host.split("/").join("@");gp.SNS.getTopWin().document.location.href=gp.Http.Login+"/Home/SNSLogin/"+user.id+"|"+Host+"|"+Error+"|true|facebook";gp.SNS.selfClose()},connectToTwitter:function(){var width=750;var height=800;var left=(screen.width-width)/2;var top=(screen.height-height)/2;var oAuthWindow=window.open(gp.Http.Login+"/Home/ConnectToTwitter","twitter","width="+width+",height="+height+",left="+left+",top="+top);oAuthWindow.focus();var oAuthInterval=setInterval(function(){if(oAuthWindow.closed){var result=gp.Util.GetCookie("TwitterResult");if(result!="true"){return}clearInterval(oAuthInterval);gp.Util.DeleteCookie("TwitterResult");location.reload()}},1000)},text:"",url:"",tag:"",share:function(t,text,url,tag){var _c=this;if(text!=undefined){_c.text=text}if(url!=undefined){_c.url=url}if(tag!=undefined){_c.tag=tag}var _url=[];switch(t){case"twitter":_url.push("https://twitter.com/share");_url.push("?url="+encodeURIComponent(_c.url));_url.push("&text="+encodeURIComponent(_c.text));_url.push("&lang=en");window.open(_url.join(""),"_twitter","width=700, height=400, resizable=1");break;case"facebook":_url.push("http://www.facebook.com/sharer.php");_url.push("?s=100");_url.push("&u="+encodeURIComponent(_c.url));_url.push("&t="+encodeURIComponent(_c.text));window.open(_url.join(""),"_facebook","width=1000, height=590, resizable=1");break;case"me2day":var _text=_c.text+' "":'+_c.url;_url.push("http://me2day.net/posts/new");_url.push("?new_post[body]="+encodeURIComponent(_text));if(_c.tag!=""){_url.push("&new_post[tags]="+encodeURIComponent(_c.tags))}window.open(_url.join(""),"_me2day","width=1000, height=600, resizable=1");break;case"yozm":_url.push("http://yozm.daum.net/api/popup/prePost");_url.push("?link="+encodeURIComponent(_c.url));_url.push("&prefix="+encodeURIComponent(_c.text));window.open(_url.join(""),"_yozm","width=466, height=356, resizable=1");break}},getTopWin:function(){if(typeof(opener)!="undefined"){return opener}else{return window}},selfClose:function(){if(typeof(opener)!="undefined"){self.close()}}};